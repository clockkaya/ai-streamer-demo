# ğŸ™ï¸ AI-Streamer-Demo: æ™ºèƒ½è™šæ‹Ÿä¸»æ’­åç«¯æ ¸å¿ƒ

<div align="center">

![Python](https://img.shields.io/badge/Python-3.12%2B-blue?logo=python)
![FastAPI](https://img.shields.io/badge/FastAPI-0.100%2B-009688?logo=fastapi)
![MongoDB](https://img.shields.io/badge/MongoDB-7.0%2B-47A248?logo=mongodb)
![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker)

</div>

è¿™æ˜¯ä¸€ä¸ªåŸºäº Google Gemini å¤§æ¨¡å‹å¼€å‘çš„è½»é‡çº§è™šæ‹Ÿä¸»æ’­åç«¯ Demoã€‚æœ¬é¡¹ç›®é›†æˆäº† **RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰**ã€**å®æ—¶ WebSocket æµå¼äº¤äº’** åŠ **TTSï¼ˆè¯­éŸ³åˆæˆï¼‰** æŠ€æœ¯ï¼Œæ—¨åœ¨æ¨¡æ‹ŸçœŸå®çš„ç›´æ’­é—´äº’åŠ¨åœºæ™¯ã€‚

---

## ğŸŒŸ æ ¸å¿ƒäº®ç‚¹

* **ğŸ§  æ™ºèƒ½å¤§è„‘ (LLM)**: åŸºäºæœ€æ–°çš„ Google Gemini 2.5 ç³»åˆ—æ¨¡å‹ï¼Œå…·å¤‡å¼ºå¤§çš„è¯­ä¹‰ç†è§£ä¸æ‹ŸäººåŒ–è¡¨è¾¾èƒ½åŠ›ã€‚
* **ğŸ“š ç‹¬å®¶è®°å¿† (RAG)**: åˆ©ç”¨ FAISS å‘é‡æ•°æ®åº“å®ç°æœ¬åœ°çŸ¥è¯†åº“æ£€ç´¢ï¼Œæœ‰æ•ˆè§£å†³å¤§æ¨¡å‹å¹»è§‰æ”¯æŒã€‚
* **ğŸ­ å¤šè§’è‰²æ¡†æ¶ (Persona Bundle)**: å†…ç½® `PersonaManager` å¼•æ“ï¼Œæ‰€æœ‰ä¸»æ’­ï¼ˆå¦‚æ˜Ÿç³ã€ç§‘æŠ€ç”·ï¼‰çš„äººè®¾é¢„æ¡ˆã€åˆæˆéŸ³è‰²ã€ç§åŸŸçŸ¥è¯†åº“ç­‰é€šè¿‡ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶éš”ç¦»ç®¡ç†ï¼Œå³æ’å³ç”¨ï¼Œæ‰©å±•è‡ªå¦‚ã€‚
* **âš¡ å®æ—¶äº¤äº’ (WebSocket)**: é‡‡ç”¨å¼‚æ­¥ WebSocket é•¿è¿æ¥ï¼Œæ”¯æŒå•æˆ¿é—´å¤šè§‚ä¼—åŒæ—¶åœ¨çº¿äº¤æµã€å¼¹å¹•å¹¿æ’­äº¤äº’ï¼Œå“åº”æé€Ÿã€‚
* **ğŸ™ï¸ çµåŠ¨å—“éŸ³ (TTS)**: é›†æˆå¾®è½¯ Edge-TTS å¼•æ“ï¼Œå®ç°é«˜è´¨é‡è¯­éŸ³å®æ—¶åˆæˆï¼ŒéŸ³é¢‘æµç›´æ¥é€šè¿‡ Base64 ç» WebSocket æ¨é€ï¼Œæ— ç£ç›˜ I/O å»¶è¿Ÿã€‚
* **ğŸ’¾ ä¸Šä¸‹æ–‡è®°å¿† (MongoDB)**: è‡ªåŠ¨æŒä¹…åŒ–å­˜å‚¨å¯¹è¯å†å²ï¼Œæ”¯æŒæŒ‰æˆ¿é—´å·éš”ç¦»çš„æ–­çº¿é‡è¿ä¸è¿‡å¾€è®°å¿†æ¢å¤ã€‚
* **ğŸ³ ç”Ÿäº§å°±ç»ª (Docker)**: æä¾›å®Œæ•´çš„ Docker ä¸ Docker-Compose æ—¥ç”¨é…ç½®ï¼Œä¸å†å—å›°äºå¤šä¾èµ–åº“çš„ç¯å¢ƒå†²çªã€‚
* **ğŸ›¡ï¸ å¼ºç±»å‹æ¶æ„**: é‡‡ç”¨åº•å±‚å¼ºç±»å‹éªŒè¯ (Pydantic)ï¼Œæ‰€æœ‰æ ¸å¿ƒæœåŠ¡å‡ç»è¿‡å®Œæ•´çš„ Adapter ä»£ç†æ¨¡å¼æŠ½è±¡è®¾è®¡ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

* **æ ¸å¿ƒè¯­è¨€**: Python 3.12+
* **Web æ¡†æ¶**: FastAPI (Asynchronous IO)
* **å¤§è¯­è¨€æ¨¡å‹**: Google GenAI SDK
* **å‘é‡æ•°æ®åº“**: FAISS (Facebook AI Similarity Search)
* **ä¸šåŠ¡æ•°æ®åº“**: MongoDB + Motor (å¼‚æ­¥é©±åŠ¨)
* **è¯­éŸ³åˆæˆ**: Edge-TTS
* **è¿ç»´éƒ¨ç½²**: Docker / Docker-Compose

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/your-username/ai-streamer-demo.git
cd ai-streamer-demo
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
é¡¹ç›®ä½¿ç”¨å¤šç¯å¢ƒé…ç½®ç­–ç•¥ã€‚è¯·å¤åˆ¶æ¨¡æ¿æ–‡ä»¶åˆ›å»ºä½ è‡ªå·±çš„æœ¬åœ°ç¯å¢ƒé…ç½®ï¼Œå¹¶å¡«å…¥ä½ çš„ `GEMINI_API_KEY`ï¼š

```bash
cp .env.example .env.dev
```

æ‰“å¼€ `.env.dev` è¿›è¡ŒæŒ‰éœ€é…ç½®ï¼š

```ini
# å¿…å¡«é¡¹ï¼šå‡­è¯å‚æ•°
GEMINI_API_KEY=AIzaSy...

# å¯é€‰é¡¹ï¼šå¦‚æœä½ åœ¨æœ¬åœ°ä½¿ç”¨ç§‘å­¦ä¸Šç½‘ä»£ç†
HTTP_PROXY=http://127.0.0.1:7890
HTTPS_PROXY=http://127.0.0.1:7890

# å¯é€‰é¡¹ï¼šæœ¬åœ° MongoDB è¿æ¥åœ°å€ï¼ˆä½¿ç”¨ Docker éƒ¨ç½²æ—¶å¯å¿½ç•¥æ­¤é¡¹ï¼Œç¯å¢ƒä¼šè‡ªåŠ¨æ¡¥æ¥ï¼‰
MONGO_URI=mongodb://localhost:27017
```

### 3. ä¸€é”®å¯åŠ¨ (æ¨èä½¿ç”¨ Docker)
ç¡®ä¿ä½ çš„æœºå™¨ä¸Šå·²å®‰è£… Docker å’Œ Docker-Compose å·¥å…·ã€‚

```bash
docker-compose up -d --build
```
å¯åŠ¨æˆåŠŸåï¼Œåº”ç”¨å°†è¿è¡Œåœ¨ `8000` ç«¯å£ã€‚

### 4. è®¿é—®æµ‹è¯•
* **API æ¥å£æ–‡æ¡£ (Swagger UI)**: [http://localhost:8000/docs](http://localhost:8000/docs)
* **ç³»ç»Ÿå¥åº·æ£€æŸ¥**: [http://localhost:8000/health](http://localhost:8000/health)
* **å®æ—¶ç›´æ’­é—´æ¼”ç¤º**: ç›´æ¥åŒå‡»æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `test_ws.html` å³å¯åœ¨æµè§ˆå™¨ä¸­ä½“éªŒã€‚å¯ä»¥å¤šå¼€å‡ ä¸ªæµè§ˆå™¨çª—å£ï¼Œæ¨¡æ‹Ÿå¤šä¸ªè§‚ä¼—åŒæ—¶åœ¨åŒä¸€æˆ¿é—´å‘å¼¹å¹•å“¦ï¼

---

## ğŸ’» æœ¬åœ°å¼€å‘ (é Docker ç¯å¢ƒ)

å¦‚æœä½ å¸Œæœ›åœ¨æœ¬åœ°ç›´æ¥è¿è¡Œä»£ç ä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•ï¼š

1. **ç¯å¢ƒå‡†å¤‡**: ç¡®ä¿å·²å®‰è£… Python 3.12+ï¼Œä¸”æœ¬åœ°æœ‰æ­£åœ¨è¿è¡Œçš„ MongoDBï¼ˆ27017 ç«¯å£ï¼‰ã€‚
2. **æ„å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–**:
   ```bash
   python -m venv .venv
   # Mac/Linux:
   source .venv/bin/activate  
   # Windows:
   .venv\Scripts\activate
   
   pip install -r requirements.txt
   ```
3. **å¯åŠ¨ FastAPI æœåŠ¡**:
   ```bash
   ENVIRONMENT=dev uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
   ```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/         # REST API æ¥å£ä¸ WebSocket è·¯ç”±æ ¸å¿ƒ
â”‚   â”œâ”€â”€ core/        # å…¨å±€é…ç½®, æ—¥å¿—ç³»ç»Ÿä¸è§’è‰²ç®¡ç†ä¸­å¿ƒ (PersonaManager)
â”‚   â”œâ”€â”€ db/          # MongoDB å¼‚æ­¥è¿æ¥æ± ä¸å¯¹è¯æŒä¹…åŒ–ä»“åº“
â”‚   â”œâ”€â”€ llm/         # çº¯ç²¹çš„ Gemini å®¢æˆ·ç«¯ä¸å¯¹è¯é€»è¾‘å°è£…
â”‚   â”œâ”€â”€ rag/         # æ–‡æ¡£åŠ è½½å™¨ã€æ–‡æœ¬åˆ†æ®µå™¨ä¸ FAISS å‘é‡çŸ¥è¯†åº“
â”‚   â”œâ”€â”€ schemas/     # å¼ºç±»å‹æ•°æ®æ ¡éªŒæ¨¡å‹ (Pydantic DTO)
â”‚   â”œâ”€â”€ services/    # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ¶æ„ (LiveSystem, LiveRoom, BotContext)
â”‚   â””â”€â”€ tts/         # Edge-TTS å¼‚æ­¥è¯­éŸ³æµåˆæˆå¼•æ“
â”œâ”€â”€ data/            # å­˜æ”¾å¤šè§’è‰²å®ä½“ (Persona Bundle) çš„æ ¸å¿ƒèµ„æºå±‚
â”‚   â””â”€â”€ personas/
â”‚       â”œâ”€â”€ bot_star/             # é¢„ç½®ä¸»æ’­: æ˜Ÿç³ 
â”‚       â”‚   â”œâ”€â”€ config.yaml       # => äººè®¾ã€åˆæˆéŸ³è‰²ã€çŸ¥è¯†åˆ‡ç‰‡å‚æ•°é…ç½®
â”‚       â”‚   â””â”€â”€ knowledge/        # => å­˜æ”¾è¯¥è§’è‰²ä¸“å±çš„æ–‡æœ¬åº“
â”‚       â””â”€â”€ bot_tech/             # é¢„ç½®ä¸»æ’­: æå®¢è€ç‹
â”‚           â”œâ”€â”€ config.yaml
â”‚           â””â”€â”€ knowledge/
â”œâ”€â”€ tests/           # 42ä¸ªçº¯å‡€å•å…ƒæµ‹è¯•å®ä¾‹ (Pytest æµ‹è¯•é›†)
â”œâ”€â”€ .env.example     # ç¯å¢ƒå˜é‡ç¤ºä¾‹ä¸è¯´æ˜æ¨¡æ¿ï¼ˆå›¢é˜Ÿå¯è§ï¼‰
â”œâ”€â”€ docker-compose.yml 
â”œâ”€â”€ Dockerfile
â””â”€â”€ pyproject.toml
```

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ç”¨äº AI æŠ€æœ¯æ¼”ç¤ºä¸å­¦ä¹ äº¤æµï¼Œè¯·å‹¿ç”¨äºä»»ä½•éæ³•å•†ä¸šç”¨é€”ã€‚åœ¨æ¥å…¥æ¨¡å‹å‰ï¼Œè¯·ç¡®ä¿ä½ æ‹¥æœ‰åˆæ³•çš„ Google API è®¿é—®ç½‘ç»œæƒé™ï¼Œå¹¶éµå®ˆç›¸å…³çš„æœåŠ¡é™åˆ¶æ¡æ¬¾ã€‚