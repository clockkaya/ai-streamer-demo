# ğŸ™ï¸ AI-Streamer-Demo: æ™ºèƒ½è™šæ‹Ÿä¸»æ’­å…¨æ ˆç³»ç»Ÿ

<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-5.9-blue?logo=typescript)
![React](https://img.shields.io/badge/React-19.2-61DAFB?logo=react)
![Python](https://img.shields.io/badge/Python-3.12%2B-blue?logo=python)
![FastAPI](https://img.shields.io/badge/FastAPI-0.100%2B-009688?logo=fastapi)
![MongoDB](https://img.shields.io/badge/MongoDB-7.0%2B-47A248?logo=mongodb)
![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker)

</div>

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **Monorepo** æ¶æ„çš„ç°ä»£åŒ–å…¨æ ˆ AI å®æ—¶æµåª’ä½“åº”ç”¨ï¼ŒåŒ…å«ç‹¬ç«‹çš„å‰ç«¯åº”ç”¨ (React + TypeScript) å’Œæ ¸å¿ƒåç«¯æœåŠ¡ (FastAPI + Python)ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäº Google Gemini å¤§æ¨¡å‹å¼€å‘çš„è½»é‡çº§è™šæ‹Ÿä¸»æ’­ç³»ç»Ÿï¼Œé›†æˆäº† RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ã€å®æ—¶ WebSocket äº¤äº’åŠ TTS æŠ€æœ¯ï¼Œæ—¨åœ¨æ¨¡æ‹ŸçœŸå®çš„ç›´æ’­é—´äº’åŠ¨ã€‚

---

## ğŸŒŸ æ ¸å¿ƒç†å¿µä¸æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨æ ‡å‡†çš„å¤§åº“åŒ…å°åº“ï¼ˆMonorepoï¼‰ç»“æ„ï¼Œå…¨å±€ç»Ÿç­¹ Docker å®¹å™¨ç¯å¢ƒä¸ Git æ²»ç†ï¼Œå…·ä½“ä¸šåŠ¡ç¯å¢ƒæ·±åº¦è§£è€¦ï¼š

- **å…¨å±€è§†è§’**: æ ¹ç›®å½•ä¸‹ `docker-compose.yml` ç»Ÿä¸€ç¼–æ’å…¨é‡èµ„æºï¼Œä¸€é”®å¯åŠ¨æ•´å¥—é—­ç¯ç³»ç»Ÿã€‚
- **frontend/**: å‰ç«¯ç‹¬ç«‹æ„å»ºåŸºäº Vite + React + Zustand + TailwindCSS çš„å“åº”å¼ã€å¯é‡ç”¨çš„è§†å›¾ç»„ä»¶ä¸äº¤äº’ä½“ç³»ã€‚
- **backend/**: åç«¯ä¸“æ³¨äºæä¾›ç¨³å¥çš„ LLM æ•°æ®å¼•æ“ï¼Œé‡‡ç”¨å¤šè§’è‰²æ¡†æ¶ (PersonaBundle)ã€FAISS RAG å‘é‡æ£€ç´¢ä¸ Edge-TTS è¯­éŸ³å®æ—¶æµå¼åˆæˆã€‚

---

## âš¡ æ ¸å¿ƒèƒ½åŠ›

### åç«¯å¼•æ“ (Backend)
- **ğŸ§  æ™ºèƒ½å¤§è„‘**: åŸºäºæœ€æ–°çš„ Google Gemini 2.5 æ¨¡å‹ï¼Œè¿›è¡Œæä½å»¶è¿Ÿæ‹ŸäººåŒ–è¡¨è¾¾ã€‚
- **ğŸ“š ç‹¬å®¶è®°å¿†**: åˆ©ç”¨ FAISS å®ç°æœ¬åœ°åŒ–çš„ä¸ªæ€§çŸ¥è¯†åº“ï¼ˆRAGæ£€ç´¢ï¼‰ï¼Œæ¶ˆç­å¹»è§‰å¹¶æ”¯æŒå¤šä¸»æ’­ä¸åŒäººè®¾çš„ä¸“å±çŸ¥è¯†åº“ã€‚
- **ğŸ­ åŠ¨æ€äººè®¾**: `PersonaManager` æ”¯æŒä¸€é”®æ’æ‹”è‡ªå®šä¹‰è§’è‰²çš„éŸ³è‰²ã€èƒŒæ™¯ã€è®°å¿†æ–‡æ¡£ã€‚
- **âš¡ WebSocket å®æ—¶äº¤äº’**: å¼¹å¹•çº§ä½å»¶è¿Ÿå“åº”ï¼Œæ”¯æŒå¤šç«¯æˆ¿é—´æ¶ˆæ¯å¹¿æ’­åŠæ–­çº¿è‡ªåŠ¨é‡è¿ã€‚
- **ğŸ™ï¸ æ— ç›˜è¯­éŸ³åˆæˆæµ**: é›†æˆå¾®è½¯ Edge-TTSï¼ŒåŠ¨æ€åˆæˆéŸ³é¢‘æµåç›´æ¥ Base64 å†…å­˜ç½‘ç»œçº§åˆ†å‘ï¼Œå®ç°çœŸæ­£çš„â€œé›¶è½åœ°â€ I/O ç‰¹æ€§ã€‚
- **ğŸ’¾ è®°å¿†æ²™ç®±**: åŸºäº MongoDB å®ç°çš„ä¼šè¯éš”ç¦»ã€çŸ­æ—¶çª—å£å‹ç¼©ã€ä»¥åŠè¿‡å¾€è®°å¿†æŒä¹…åŒ–ã€‚

### å‰ç«¯ä½“éªŒ (Frontend)
- **ğŸš„ æé€Ÿæ„å»º**: åº•å±‚é‡‡ç”¨ Vite + ESBuild çš„çº¯ç²¹ ESM é“¾è·¯å¼€å‘é©±åŠ¨ï¼Œè¾¾åˆ°ç§’çº§å†·å¯ã€‚
- **ğŸŒ ç¨³å¥é€šè®¯ç®¡ç†**: ç‹¬ç«‹å°è£…çš„å¯é  WebSocket Hook ä½“ç³»ï¼Œè‡ªåŠ¨æ¥ç®¡å¿ƒè·³ã€å®¹é”™é‡å»ºã€ä»¥åŠäºŒè¿›åˆ¶åª’ä½“å¸§ç»„è£…è¿˜åŸæœºåˆ¶ã€‚
- **ğŸ”„ å…¨å±€çŠ¶æ€ç®¡ç†**: åˆ©ç”¨ Zustand æä¾›å•ä¸€æ•°æ®æºåŸåˆ™ï¼Œç¡®ä¿ UI ï¼ˆå†å²å¼¹å¹•ã€æ’­æ”¾çŠ¶æ€ã€æ’é˜Ÿç­–ç•¥ï¼‰çš„é«˜åº¦ä¸€è‡´æ€§ã€‚
- **ğŸ¨ Tailwind ç°ä»£ç¾å­¦**: æ·±åº¦åˆ©ç”¨ TailwindCSS è¿›è¡Œåƒç´ çº§åƒç´ å †æ ˆæ§åˆ¶ä¸å¿«é€Ÿçš„ç¾å­¦è¿­ä»£ã€‚ 

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ä¸ä¸€é”®è¿è¡Œ

> **å¼ºçƒˆæ¨è** ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„ `docker-compose.yml`ã€‚è¿™å°†ä¸ºæ‚¨èŠ‚çœå¤§é‡çš„ç¯å¢ƒé…ç½®æ—¶é—´ã€‚

### 1. é…ç½®å¿…è¦çš„è¿è¡Œå‚æ•°

é¦–å…ˆï¼Œå¤åˆ¶åç«¯ç¤ºä¾‹ç¯å¢ƒå˜é‡ä»¥è·å¾—ä¸€å¥—å®Œæ•´çš„è¿è¡Œæ—¶èº«ä»½å‡­è¯é…ç½®ï¼š

```bash
cd backend
cp .env.example .env
```

æ‰“å¼€ `backend/.env` è¿›è¡ŒæŒ‰éœ€é…ç½®ï¼š

```ini
# å¿…å¡«é¡¹ï¼šå‡­è¯å‚æ•°
GEMINI_API_KEY=AIzaSy...

# å¯é€‰é¡¹ï¼šå¦‚æœä½ åœ¨æœ¬åœ°ä½¿ç”¨ç§‘å­¦ä¸Šç½‘ä»£ç†ï¼ˆå›½å†…è®¿é—®å¿…å¤‡ï¼‰
HTTP_PROXY=http://host.docker.internal:7890
HTTPS_PROXY=http://host.docker.internal:7890

# å¯é€‰é¡¹ï¼šè¿æ¥ä½ å®¿ä¸»çš„ MongoDBï¼ˆDocker é»˜è®¤æ¡¥æ¥é…ç½®ï¼‰
MONGO_URI=mongodb://<usernamae>:<password>@host.docker.internal:27017/?authSource=admin
```

### 2. å¯åŠ¨æœåŠ¡é›†

è¿”å›ä»“åº“æ ¹ç›®å½•ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤å³å¯æ„å»ºå¹¶æ‹‰èµ·å…¨å®¶æ¡¶å®¹å™¨ï¼š

```bash
docker-compose up -d --build
```

ç³»ç»Ÿç¼–æ’å®Œæˆåï¼š
- ğŸŒŸ å‰ç«¯åº”ç”¨å…¥å£ï¼š[http://localhost:3000](http://localhost:3000)
- âš™ï¸ åç«¯æœåŠ¡æ¥å£ï¼š[http://localhost:8000](http://localhost:8000)
- ğŸ“ Swagger API æ–‡æ¡£ï¼š[http://localhost:8000/docs](http://localhost:8000/docs)

---

## ğŸ§‘â€ğŸ’» çº¯æœ¬åœ°éå®¹å™¨åŒ–å¼€å‘æŒ‡å—

å¦‚æœæ‚¨å¸Œæœ›åœ¨å®¿ä¸»æœºæœ¬åœ°ï¼ˆNon-Dockerï¼‰ç¯å¢ƒä¸­ç‹¬ç«‹è°ƒè¯•ä»£ç ï¼š

### å¯åŠ¨åç«¯ (Backend)
å‰ç½®ä¾èµ–ï¼šPython 3.12+ å¹¶ä¸”å·²å¯åŠ¨æœ¬åœ° MongoDB (27017)ã€‚
```bash
cd backend
python -m venv .venv
source .venv/bin/activate  # Windows ä¸‹ä¸º: .venv\Scripts\activate
pip install -r requirements.txt

# è¿è¡Œ FastAPI å¼€å‘æœåŠ¡å™¨
ENVIRONMENT=dev uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### å¯åŠ¨å‰ç«¯ (Frontend)
å‰ç½®ä¾èµ–ï¼šNode.js 20+ ä»¥åŠ pnpmã€‚
```bash
cd frontend
pnpm install

# è¿è¡Œ Vite å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

---

## ğŸ“‚ é¡¹ç›®æ¨¡å—ç»“æ„æ‘˜è¦

```text
ai-streamer-demo/
â”œâ”€â”€ docker-compose.yml        # å…¨å±€æœåŠ¡ç¼–æ’
â”œâ”€â”€ Makefile / scripts        # (å¯é€‰) å…¨å±€æŒ‡ä»¤å®šä¹‰åº“
â”‚
â”œâ”€â”€ frontend/                 # ğŸš€ å®¢æˆ·ç«¯è§†è§’æ¨¡å—
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ hooks/            # æ ¸å¿ƒå¦‚ useWebSocket, useAudioQueue
â”‚   â”‚   â”œâ”€â”€ stores/           # Zustand çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ components/       # åŸå­ UI å±‚
â”‚   â”‚   â””â”€â”€ App.tsx           # é«˜é˜¶è§†å›¾å®¹å™¨
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ backend/                  # âš™ï¸ æ ¸å¿ƒå¤§è„‘æ¨¡å—
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ api/              # HTTP/WS è·¯ç”±æ§åˆ¶å™¨
    â”‚   â”œâ”€â”€ llm/              # GenAI è°ƒç”¨é›†æˆ
    â”‚   â”œâ”€â”€ rag/              # FAISS å‘é‡æ£€ç´¢ç³»ç»Ÿ
    â”‚   â””â”€â”€ tts/              # Edge-TTS éŸ³é¢‘æµç›´å‡ºå¼•æ“
    â”œâ”€â”€ data/
    â”‚   â””â”€â”€ personas/         # å„ä¸»æ’­äººè®¾å…ƒæ•°æ®ä¸ç§æœ‰æœ¬åœ°è¯­æ–™åº“
    â”œâ”€â”€ tests/                 
    â”œâ”€â”€ Dockerfile          
    â””â”€â”€ requirements.txt
```

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ç”¨äº AI æŠ€æœ¯æ¼”ç¤ºä¸å…¨æ ˆæ¶æ„å‚è€ƒè®¾è®¡ï¼Œè¯·å‹¿å°†æ¼”ç¤º Token æˆ–é¡¹ç›®æœ¬ä½“ç›´æ¥ç”¨äºå•†ä¸šé‡äº§ç¯å¢ƒã€‚åœ¨æ¥å…¥æ¨¡å‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æ‹¥æœ‰è®¿é—® Google AI æœåŠ¡çš„åˆæ³•ç½‘ç»œçº¿è·¯æƒé™ï¼Œå¹¶éµå®ˆå…¶åŒºåŸŸè¿è¥ç›¸å…³ä½¿ç”¨æ¡æ¬¾ã€‚
